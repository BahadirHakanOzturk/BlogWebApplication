@model UserUpdateVM

<div class="col-12 grid-margin stretch-card">
	<div class="card">
		<div class="card-body">
			<h4 class="card-title">Yazar Profil Bilgileri Düzenle</h4>
			<br />
			<form class="forms-sample" asp-action="EditProfile" asp-controller="Writer" method="post" enctype="multipart/form-data">
				<div class="form-group">
					<label asp-for="NameSurname">Ad Soyad</label>
					<input type="text" asp-for="NameSurname" class="form-control" />
				</div>
				<div class="form-group">
					<label asp-for="UserName">Kullanıcı Adı</label>
					<input type="text" asp-for="UserName" class="form-control" />
				</div>
				<div class="form-group">
					<label asp-for="Title">Unvan</label>
					<input type="text" asp-for="Title" class="form-control" />
				</div>
				<div class="form-group">
					<label asp-for="Mail">Mail Adresi</label>
					<input type="email" asp-for="Mail" class="form-control" />
				</div>
				<div class="form-group">
					<label asp-for="Password">Yeni Şifreniz</label>
					<input type="text" asp-for="Password" class="form-control" />
				</div>
				<div class="form-group">
					<label asp-for="Image">Yazar Görseli</label>
					<input id="fileInput" type="file" asp-for="Image" class="form-control" onchange="return validateFile();" value="@Model.ImageUrl" />
				</div>
				<div class="form-group">
					<label asp-for="About">Hakkında</label>
					<textarea asp-for ="About" rows="6" class="form-control"></textarea>
				</div>
				<button class="btn btn-gradient-primary mr-2">Güncelle</button>
				<button asp-action="Index" asp-controller="Dashboard" class="btn btn-light">İptal</button>
			</form>
		</div>
	</div>
</div>

<script>
	function validateFile() {
		var fileInput = document.getElementById('fileInput'); 
		var fileName = fileInput.value;
		var fileSize = fileInput.files[0].size; 

		var allowedExtensions = /(\.jpg|\.jpeg|\.png)$/i;
		if (!allowedExtensions.test(fileName)) {
			alert('Hata: Sadece JPEG ve PNG dosyaları yükleyebilirsiniz.');
			fileInput.value = '';
			return false;
		}

		var maxSize = 25 * 1024 * 1024; 
		if (fileSize > maxSize) {
			alert('Hata: Dosya boyutu 25 MB\'dan büyük olamaz.');
			fileInput.value = '';
			return false;
		}

		alert('Başarıyla yüklendi');

		return true;
	}
</script>